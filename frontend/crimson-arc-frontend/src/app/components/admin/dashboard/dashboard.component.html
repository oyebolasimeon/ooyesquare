<div class="dashboard-layout">
  <!-- Mobile Overlay -->
  <div class="mobile-overlay" [class.active]="isMobileMenuOpen" (click)="toggleMobileMenu()"></div>
  
  <!-- Sidebar Navigation -->
  <div class="sidebar" [class.mobile-open]="isMobileMenuOpen">
    <div class="sidebar-header">
      <img src="assets/logo.png" alt="STCOGA Logo" class="logo-image" />
      <span class="logo-text">STCOGA</span>
    </div>

    <div class="nav-menu">
      <div class="nav-item active" (click)="navigateTo('dashboard')">
        <i class="pi pi-home"></i>
        <span>Dashboard</span>
      </div>
      <div class="nav-item" (click)="navigateTo('positions')">
        <i class="pi pi-briefcase"></i>
        <span>Positions</span>
      </div>
      <div class="nav-item" (click)="navigateTo('contestants')">
        <i class="pi pi-users"></i>
        <span>Contestants</span>
      </div>
      <div class="nav-item" (click)="navigateTo('voters')">
        <i class="pi pi-user"></i>
        <span>Voters</span>
      </div>
      <div class="nav-item" (click)="navigateTo('elections')">
        <i class="pi pi-calendar"></i>
        <span>Elections</span>
      </div>
      <div class="nav-item" (click)="navigateTo('results')">
        <i class="pi pi-chart-bar"></i>
        <span>Results</span>
      </div>
    </div>

    <div class="sidebar-footer">
      <div class="nav-item" (click)="logout()">
        <i class="pi pi-sign-out"></i>
        <span>Logout</span>
      </div>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Top Bar -->
    <div class="topbar">
      <button pButton icon="pi pi-bars" (click)="toggleMobileMenu()" class="menu-toggle p-button-rounded p-button-text"></button>
      <div class="search-bar">
        <i class="pi pi-search"></i>
        <input type="text" placeholder="Search..." />
      </div>
      <div class="topbar-actions">
        <button pButton icon="pi pi-bell" class="p-button-rounded p-button-text"></button>
        <button pButton icon="pi pi-cog" class="p-button-rounded p-button-text"></button>
        <div class="user-avatar">
          <p-avatar [image]="adminAvatarUrl" shape="circle" [style]="{'width': '40px', 'height': '40px'}"></p-avatar>
          <span class="user-name">{{ adminName }}</span>
        </div>
      </div>
    </div>

    <!-- Dashboard Content -->
    <div class="dashboard-content">
      <!-- Welcome Section -->
      <div class="welcome-section">
        <div class="welcome-text">
          <h1>Hello, {{ adminName }}!</h1>
          <p>Welcome to STCOGA Election Management System</p>
        </div>
        <div class="welcome-illustration">
          <p-avatar [image]="adminAvatarUrl" shape="circle" [style]="{'width': '80px', 'height': '80px'}"></p-avatar>
        </div>
      </div>

      <!-- Stats Overview -->
      <div class="stats-overview">
        <div class="stat-card blue" (click)="navigateTo('positions')">
          <div class="stat-content">
            <div class="stat-icon">
              <i class="pi pi-briefcase"></i>
            </div>
            <div class="stat-details">
              <h3>{{ stats.totalPositions }}</h3>
              <p>Total Positions</p>
            </div>
          </div>
          <i class="pi pi-arrow-right card-arrow"></i>
        </div>

        <div class="stat-card brown" (click)="navigateTo('contestants')">
          <div class="stat-content">
            <div class="stat-icon">
              <i class="pi pi-users"></i>
            </div>
            <div class="stat-details">
              <h3>{{ stats.totalContestants }}</h3>
              <p>Total Contestants</p>
            </div>
          </div>
          <i class="pi pi-arrow-right card-arrow"></i>
        </div>

        <div class="stat-card green" (click)="navigateTo('voters')">
          <div class="stat-content">
            <div class="stat-icon">
              <i class="pi pi-user"></i>
            </div>
            <div class="stat-details">
              <h3>{{ stats.totalVoters }}</h3>
              <p>Total Voters</p>
            </div>
          </div>
          <i class="pi pi-arrow-right card-arrow"></i>
        </div>

        <div class="stat-card purple" (click)="navigateTo('results')">
          <div class="stat-content">
            <div class="stat-icon">
              <i class="pi pi-check-circle"></i>
            </div>
            <div class="stat-details">
              <h3>{{ stats.totalVotes }}</h3>
              <p>Votes Cast</p>
            </div>
          </div>
          <i class="pi pi-arrow-right card-arrow"></i>
        </div>
      </div>

      <!-- Main Grid -->
      <div class="dashboard-grid">
        <!-- Election Status Card -->
        <div class="grid-card election-status-card">
          <div class="card-header">
            <h3>Election Status</h3>
            <i class="pi pi-calendar"></i>
          </div>
          <div class="card-body">
            <div class="status-info">
              <div class="status-row">
                <span class="label">Start Date:</span>
                <span class="value">{{ electionStatus?.startDate ? (electionStatus.startDate | date:'medium') : 'Not Set' }}</span>
              </div>
              <div class="status-row">
                <span class="label">End Date:</span>
                <span class="value">{{ electionStatus?.endDate ? (electionStatus.endDate | date:'medium') : 'Not Set' }}</span>
              </div>
              <div class="status-row">
                <span class="label">Status:</span>
                <p-tag [value]="electionStatus?.isActive ? 'Active' : 'Inactive'" 
                       [severity]="electionStatus?.isActive ? 'success' : 'danger'"></p-tag>
              </div>
            </div>
            <button pButton label="Configure Election" icon="pi pi-cog" 
                    (click)="navigateTo('elections')" class="configure-btn"></button>
          </div>
        </div>

        <!-- Quick Actions Card -->
        <div class="grid-card quick-actions-card">
          <div class="card-header">
            <h3>Quick Actions</h3>
            <i class="pi pi-bolt"></i>
          </div>
          <div class="card-body">
            <div class="action-list">
              <div class="action-item" (click)="navigateTo('positions')">
                <div class="action-icon blue">
                  <i class="pi pi-briefcase"></i>
                </div>
                <div class="action-text">
                  <h4>Manage Positions</h4>
                  <p>Add or edit election positions</p>
                </div>
                <i class="pi pi-chevron-right"></i>
              </div>

              <div class="action-item" (click)="navigateTo('contestants')">
                <div class="action-icon brown">
                  <i class="pi pi-users"></i>
                </div>
                <div class="action-text">
                  <h4>Manage Contestants</h4>
                  <p>Add candidates to positions</p>
                </div>
                <i class="pi pi-chevron-right"></i>
              </div>

              <div class="action-item" (click)="navigateTo('voters')">
                <div class="action-icon green">
                  <i class="pi pi-upload"></i>
                </div>
                <div class="action-text">
                  <h4>Upload Voters</h4>
                  <p>Import voters from Excel</p>
                </div>
                <i class="pi pi-chevron-right"></i>
              </div>

              <div class="action-item" (click)="navigateTo('results')">
                <div class="action-icon purple">
                  <i class="pi pi-chart-bar"></i>
                </div>
                <div class="action-text">
                  <h4>View Results</h4>
                  <p>Check election analytics</p>
                </div>
                <i class="pi pi-chevron-right"></i>
              </div>
            </div>
          </div>
        </div>

        <!-- Recent Activity Card -->
        <div class="grid-card activity-card">
          <div class="card-header">
            <h3>Recent Activity</h3>
            <i class="pi pi-history"></i>
          </div>
          <div class="card-body">
            <div class="activity-list">
              <div class="activity-item">
                <div class="activity-icon">
                  <i class="pi pi-check-circle"></i>
                </div>
                <div class="activity-details">
                  <p class="activity-title">System Ready</p>
                  <p class="activity-time">Start by adding positions</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
